{"ast":null,"code":"var _jsxFileName = \"/home/mimi/Desktop/COMP3900/capstone-project-comp3900-f11a-2mjec/photopro-app/src/components/modal/BookmarkModal.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport ReactDom from \"react-dom\";\nimport \"./BookmarkModal.css\";\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport axios from \"axios\";\nimport CollectionFolder from \"./collectionFolder/CollectionFolder\";\nexport default function BookmarkModal({\n  openModal,\n  children,\n  onCloseModal,\n  photoId\n}) {\n  const [enteredCollection, setEnteredCollection] = useState(\"\");\n  const [newCollectionEntered, setNewCollectionEntered] = useState(\"\");\n  const [privateCollection, setPrivateCollection] = useState(false);\n  const [usersCollections, setUsersCollections] = useState(null);\n  const [showCreateCollectionForm, setShowCreateCollectionForm] = useState(false);\n  const [showCreateCollectionButton, setShowCreateCollectionButton] = useState(true);\n\n  const getUsersCollections = () => {\n    axios({\n      method: \"GET\",\n      url: \"http://localhost:5000/get_users_collection\",\n      params: {\n        batch_size: 10\n      }\n    }).then(response => {\n      console.log(response);\n\n      if (response.data.result !== false) {\n        console.log(\"not false\");\n        setUsersCollections(response.data.result);\n      }\n    });\n  };\n\n  useEffect(() => {\n    console.log(\"getting users collections\");\n    getUsersCollections();\n  }, [newCollectionEntered]);\n\n  if (!openModal) {\n    return null;\n  }\n\n  let collectionFolders = null;\n\n  if (usersCollections != null) {\n    collectionFolders = usersCollections.map(collection => {\n      return /*#__PURE__*/React.createElement(CollectionFolder, {\n        key: collection.collection_id,\n        collectionInfo: collection,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 9\n        }\n      });\n    });\n  } //console.log(collectionFolders);\n\n\n  const handleEnteredCollection = e => {\n    e.preventDefault();\n    getUsersCollections();\n    console.log(usersCollections); //createCollections();\n\n    setNewCollectionEntered(enteredCollection); //addPhotoToCollections();\n  };\n\n  const createCollections = () => {\n    axios({\n      method: \"POST\",\n      url: \"http://localhost:5000/create_collection\",\n      params: {\n        collection_name: enteredCollection,\n        private: privateCollection\n      }\n    }).then(response => {\n      console.log(response);\n    });\n  };\n\n  const addPhotoToCollections = (col_id, img_id) => {\n    axios({\n      method: \"POST\",\n      url: \"http://localhost:5000/add_photo_to_collection\",\n      params: {\n        collection_id: 15,\n        image_id: photoId\n      }\n    }).then(response => {\n      console.log(response);\n    });\n  };\n\n  return ReactDom.createPortal( /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overlayStyles\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bookmarkModal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"closeButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    variant: \"contained\",\n    onClick: onCloseModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(HighlightOffIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, \"Add to Collection\"), showCreateCollectionButton ? /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: () => {\n      setShowCreateCollectionForm(true);\n      setShowCreateCollectionButton(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, \"Create a collection\") : null, showCreateCollectionForm ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"enteredCollection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleEnteredCollection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"reply\",\n    value: enteredCollection,\n    onChange: e => setEnteredCollection(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  })))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collectionFolders\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, collectionFolders))), document.getElementById(\"portal\"));\n}","map":{"version":3,"sources":["/home/mimi/Desktop/COMP3900/capstone-project-comp3900-f11a-2mjec/photopro-app/src/components/modal/BookmarkModal.jsx"],"names":["React","useState","useEffect","ReactDom","HighlightOffIcon","IconButton","Button","axios","CollectionFolder","BookmarkModal","openModal","children","onCloseModal","photoId","enteredCollection","setEnteredCollection","newCollectionEntered","setNewCollectionEntered","privateCollection","setPrivateCollection","usersCollections","setUsersCollections","showCreateCollectionForm","setShowCreateCollectionForm","showCreateCollectionButton","setShowCreateCollectionButton","getUsersCollections","method","url","params","batch_size","then","response","console","log","data","result","collectionFolders","map","collection","collection_id","handleEnteredCollection","e","preventDefault","createCollections","collection_name","private","addPhotoToCollections","col_id","img_id","image_id","createPortal","target","value","document","getElementById"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ReactDom from \"react-dom\";\nimport \"./BookmarkModal.css\";\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\n\nimport axios from \"axios\";\n\nimport CollectionFolder from \"./collectionFolder/CollectionFolder\";\n\nexport default function BookmarkModal({\n  openModal,\n  children,\n  onCloseModal,\n  photoId,\n}) {\n  const [enteredCollection, setEnteredCollection] = useState(\"\");\n  const [newCollectionEntered, setNewCollectionEntered] = useState(\"\");\n  const [privateCollection, setPrivateCollection] = useState(false);\n\n  const [usersCollections, setUsersCollections] = useState(null);\n\n  const [showCreateCollectionForm, setShowCreateCollectionForm] = useState(false);\n\n  const [showCreateCollectionButton, setShowCreateCollectionButton] = useState(true);\n\n  const getUsersCollections = () => {\n    axios({\n      method: \"GET\",\n      url: \"http://localhost:5000/get_users_collection\",\n      params: {\n        batch_size: 10,\n      },\n    }).then((response) => {\n      console.log(response);\n      if (response.data.result !== false) {\n        console.log(\"not false\");\n        setUsersCollections(response.data.result);\n      }\n    });\n  };\n\n  useEffect(() => {\n    console.log(\"getting users collections\");\n    getUsersCollections();\n  }, [newCollectionEntered]);\n\n  if (!openModal) {\n    return null;\n  }\n\n  let collectionFolders = null;\n  if (usersCollections != null) {\n    collectionFolders = usersCollections.map((collection) => {\n      return (\n        <CollectionFolder\n          key={collection.collection_id}\n          collectionInfo={collection}\n        />\n      );\n    });\n  }\n\n  //console.log(collectionFolders);\n\n  const handleEnteredCollection = (e) => {\n    e.preventDefault();\n    getUsersCollections();\n    console.log(usersCollections);\n\n    //createCollections();\n    setNewCollectionEntered(enteredCollection);\n    //addPhotoToCollections();\n  };\n\n  const createCollections = () => {\n    axios({\n      method: \"POST\",\n      url: \"http://localhost:5000/create_collection\",\n      params: {\n        collection_name: enteredCollection,\n        private: privateCollection,\n      },\n    }).then((response) => {\n      console.log(response);\n    });\n  };\n\n  const addPhotoToCollections = (col_id, img_id) => {\n    axios({\n      method: \"POST\",\n      url: \"http://localhost:5000/add_photo_to_collection\",\n      params: {\n        collection_id: 15,\n        image_id: photoId,\n      },\n    }).then((response) => {\n      console.log(response);\n    });\n  };\n\n\n  return ReactDom.createPortal(\n    <React.Fragment>\n      <div className=\"overlayStyles\" />\n      <div className=\"bookmarkModal\">\n        <div className=\"closeButton\">\n          <IconButton variant=\"contained\" onClick={onCloseModal}>\n            <HighlightOffIcon />\n          </IconButton>\n        </div>\n        <h2>Add to Collection</h2>\n\n        {showCreateCollectionButton ? (\n        <Button variant=\"outlined\" color=\"primary\" onClick={()=>{setShowCreateCollectionForm(true);setShowCreateCollectionButton(false);}}>Create a collection</Button>\n        ) : null}\n\n        {showCreateCollectionForm ? (\n        <div className=\"enteredCollection\">\n          <form onSubmit={handleEnteredCollection}>\n            <div>\n              <input\n                type=\"reply\"\n                value={enteredCollection}\n                onChange={(e) => setEnteredCollection(e.target.value)}\n              />\n            </div>\n          </form>\n        </div>\n         ) : null}\n        <div className=\"collectionFolders\">{collectionFolders}</div>\n      </div>\n    </React.Fragment>,\n    document.getElementById(\"portal\")\n  );\n}\n"]},"metadata":{},"sourceType":"module"}