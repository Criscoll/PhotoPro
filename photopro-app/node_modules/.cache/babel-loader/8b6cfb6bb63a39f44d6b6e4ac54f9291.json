{"ast":null,"code":"var _jsxFileName = \"/home/mimi/Desktop/COMP3900/capstone-project-comp3900-f11a-2mjec/photopro-app/src/components/comments/comment/Comment.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./Comment.css\";\nimport ReplyIcon from \"@material-ui/icons/Reply\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport axios from \"axios\";\nimport ReplyComments from \"./replyComments/ReplyComments\";\nexport default function Comment(props) {\n  const [reply_input, set_reply_input] = useState(\"\");\n  const [show_reply_form, set_show_reply_form] = useState(false);\n  const [showViewReplies, setShowViewReplies] = useState(false);\n  const [newReply, setNewReply] = useState(\"\");\n\n  const getProfilePhoto = () => {\n    axios({\n      method: \"GET\",\n      url: \"http://localhost:5000/get_profile_photo\",\n      params: {\n        user_id: props.comment_info.commenter\n      }\n    }).then(response => {\n      console.log(response);\n\n      if (response.data.result) {\n        setProfileImg(response.data.result);\n      } else {\n        setProfileImg(null);\n      }\n    });\n  };\n\n  useEffect(() => {\n    getProfilePhoto();\n  }, []);\n  let commenterID = String(props.comment_info.commenter);\n  let userID = localStorage.getItem(\"userID\");\n\n  const deleteComment = commentID => {\n    axios({\n      method: \"POST\",\n      url: \"http://localhost:5000/post_delete_comment\",\n      params: {\n        comment_id: commentID\n      }\n    }).then(response => {\n      if (response.data.result) {\n        console.log(`delete request ${response}`);\n        props.updateComments(props.comment_info.comment);\n        console.log(response);\n      }\n    });\n  };\n\n  const handleDeleteClicked = () => {\n    deleteComment(props.comment_info.comment_id);\n  };\n\n  let deleteButton = commenterID === userID ? /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handleDeleteClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DeleteOutlineIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  })) : /*#__PURE__*/React.createElement(Button, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  });\n\n  const handleReplyClicked = () => {\n    // open the form\n    if (show_reply_form) {\n      set_show_reply_form(false);\n    } else {\n      set_show_reply_form(true);\n    }\n  };\n\n  const handleReplySubmitted = e => {\n    e.preventDefault();\n    post_reply_comments(reply_input);\n  };\n\n  const post_reply_comments = reply_input => {\n    axios({\n      method: \"POST\",\n      url: \"http://localhost:5000/post_comment_to_comment\",\n      params: {\n        comment_id: props.comment_info.comment_id,\n        comment: reply_input,\n        image_id: props.comment_info.image_id\n      }\n    }).then(response => {\n      if (response.data.result) {\n        props.updateComments(reply_input);\n        set_reply_input(\"\");\n\n        if (showViewReplies === true) {\n          setNewReply(reply_input);\n        }\n\n        console.log(\"reply submitted\");\n      }\n    });\n    axios({\n      method: \"GET\",\n      url: \"http://localhost:5000/update_comment_recommendation\",\n      params: {\n        image_id: props.comment_info.image_id\n      } //user_id: 1\n\n    }).then(res => {\n      console.log(res);\n    });\n  };\n\n  const handleViewRepliesClicked = () => {\n    if (showViewReplies) {\n      setShowViewReplies(false);\n    } else {\n      setShowViewReplies(true);\n    }\n  };\n\n  const handleHideRepliesClicked = () => {\n    setShowViewReplies(false);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card v-card v-sheet theme--light elevation-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"v-avatar avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://images.unsplash.com/photo-1490894641324-cfac2f5cd077?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=100&q=70\",\n    alt: \"user icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"displayName title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, \"@\", props.comment_info.username), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"displayName caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, props.comment_info.created_at), localStorage.getItem(\"userLoggedIn\") ? /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handleReplyClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ReplyIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  })), deleteButton) : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, props.comment_info.comment)), show_reply_form ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reply_form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleReplySubmitted,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"reply\",\n    id: \"reply_input\",\n    value: reply_input,\n    onChange: e => set_reply_input(e.target.value),\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  })))) : null, props.comment_info.count > 0 && showViewReplies === false ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reply_form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleViewRepliesClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, \"View \", props.comment_info.count, \" replies...\")) : null, showViewReplies ? /*#__PURE__*/React.createElement(ReplyComments, {\n    comment_id: props.comment_info.comment_id,\n    updateComments: props.updateComments,\n    setShowViewReplies: setShowViewReplies,\n    newReply: newReply,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }) : null, showViewReplies ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleHideRepliesClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, \"Hide replies\") : null));\n}","map":{"version":3,"sources":["/home/mimi/Desktop/COMP3900/capstone-project-comp3900-f11a-2mjec/photopro-app/src/components/comments/comment/Comment.jsx"],"names":["React","useState","useEffect","ReplyIcon","DeleteOutlineIcon","IconButton","Button","axios","ReplyComments","Comment","props","reply_input","set_reply_input","show_reply_form","set_show_reply_form","showViewReplies","setShowViewReplies","newReply","setNewReply","getProfilePhoto","method","url","params","user_id","comment_info","commenter","then","response","console","log","data","result","setProfileImg","commenterID","String","userID","localStorage","getItem","deleteComment","commentID","comment_id","updateComments","comment","handleDeleteClicked","deleteButton","handleReplyClicked","handleReplySubmitted","e","preventDefault","post_reply_comments","image_id","res","handleViewRepliesClicked","handleHideRepliesClicked","username","created_at","target","value","count"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,eAAP;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,+BAA1B;AAEA,eAAe,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AACrC,QAAM,CAACC,WAAD,EAAcC,eAAd,IAAiCX,QAAQ,CAAC,EAAD,CAA/C;AACA,QAAM,CAACY,eAAD,EAAkBC,mBAAlB,IAAyCb,QAAQ,CAAC,KAAD,CAAvD;AACA,QAAM,CAACc,eAAD,EAAkBC,kBAAlB,IAAwCf,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM,CAACgB,QAAD,EAAWC,WAAX,IAA0BjB,QAAQ,CAAC,EAAD,CAAxC;;AAEA,QAAMkB,eAAe,GAAG,MAAM;AAC5BZ,IAAAA,KAAK,CAAC;AACJa,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,EAAE,yCAFD;AAGJC,MAAAA,MAAM,EAAE;AACNC,QAAAA,OAAO,EAAEb,KAAK,CAACc,YAAN,CAAmBC;AADtB;AAHJ,KAAD,CAAL,CAMGC,IANH,CAMSC,QAAD,IAAc;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,UAAIA,QAAQ,CAACG,IAAT,CAAcC,MAAlB,EAA0B;AACxBC,QAAAA,aAAa,CAACL,QAAQ,CAACG,IAAT,CAAcC,MAAf,CAAb;AACD,OAFD,MAEO;AACLC,QAAAA,aAAa,CAAC,IAAD,CAAb;AACD;AACF,KAbD;AAcD,GAfD;;AAiBA9B,EAAAA,SAAS,CAAC,MAAM;AACdiB,IAAAA,eAAe;AAChB,GAFQ,EAEN,EAFM,CAAT;AAIA,MAAIc,WAAW,GAAGC,MAAM,CAACxB,KAAK,CAACc,YAAN,CAAmBC,SAApB,CAAxB;AACA,MAAIU,MAAM,GAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAb;;AAEA,QAAMC,aAAa,GAAIC,SAAD,IAAe;AACnChC,IAAAA,KAAK,CAAC;AACJa,MAAAA,MAAM,EAAE,MADJ;AAEJC,MAAAA,GAAG,EAAE,2CAFD;AAGJC,MAAAA,MAAM,EAAE;AAAEkB,QAAAA,UAAU,EAAED;AAAd;AAHJ,KAAD,CAAL,CAIGb,IAJH,CAISC,QAAD,IAAc;AACpB,UAAIA,QAAQ,CAACG,IAAT,CAAcC,MAAlB,EAA0B;AACxBH,QAAAA,OAAO,CAACC,GAAR,CAAa,kBAAiBF,QAAS,EAAvC;AACAjB,QAAAA,KAAK,CAAC+B,cAAN,CAAqB/B,KAAK,CAACc,YAAN,CAAmBkB,OAAxC;AACAd,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACD;AACF,KAVD;AAWD,GAZD;;AAcA,QAAMgB,mBAAmB,GAAG,MAAM;AAChCL,IAAAA,aAAa,CAAC5B,KAAK,CAACc,YAAN,CAAmBgB,UAApB,CAAb;AACD,GAFD;;AAIA,MAAII,YAAY,GACdX,WAAW,KAAKE,MAAhB,gBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAEQ,mBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,gBAKE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANJ;;AASA,QAAME,kBAAkB,GAAG,MAAM;AAC/B;AACA,QAAIhC,eAAJ,EAAqB;AACnBC,MAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACD,KAFD,MAEO;AACLA,MAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACD;AACF,GAPD;;AASA,QAAMgC,oBAAoB,GAAIC,CAAD,IAAO;AAClCA,IAAAA,CAAC,CAACC,cAAF;AACAC,IAAAA,mBAAmB,CAACtC,WAAD,CAAnB;AACD,GAHD;;AAKA,QAAMsC,mBAAmB,GAAItC,WAAD,IAAiB;AAC3CJ,IAAAA,KAAK,CAAC;AACJa,MAAAA,MAAM,EAAE,MADJ;AAEJC,MAAAA,GAAG,EAAE,+CAFD;AAGJC,MAAAA,MAAM,EAAE;AACNkB,QAAAA,UAAU,EAAE9B,KAAK,CAACc,YAAN,CAAmBgB,UADzB;AAENE,QAAAA,OAAO,EAAE/B,WAFH;AAGNuC,QAAAA,QAAQ,EAAExC,KAAK,CAACc,YAAN,CAAmB0B;AAHvB;AAHJ,KAAD,CAAL,CAQGxB,IARH,CAQSC,QAAD,IAAc;AACpB,UAAIA,QAAQ,CAACG,IAAT,CAAcC,MAAlB,EAA0B;AACxBrB,QAAAA,KAAK,CAAC+B,cAAN,CAAqB9B,WAArB;AACAC,QAAAA,eAAe,CAAC,EAAD,CAAf;;AACA,YAAIG,eAAe,KAAK,IAAxB,EAA8B;AAC5BG,UAAAA,WAAW,CAACP,WAAD,CAAX;AACD;;AACDiB,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACD;AACF,KAjBD;AAkBAtB,IAAAA,KAAK,CAAC;AACJa,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,EAAE,qDAFD;AAGJC,MAAAA,MAAM,EAAE;AAAE4B,QAAAA,QAAQ,EAAExC,KAAK,CAACc,YAAN,CAAmB0B;AAA/B,OAHJ,CAG+C;;AAH/C,KAAD,CAAL,CAIGxB,IAJH,CAISyB,GAAD,IAAS;AACfvB,MAAAA,OAAO,CAACC,GAAR,CAAYsB,GAAZ;AACD,KAND;AAOD,GA1BD;;AA4BA,QAAMC,wBAAwB,GAAG,MAAM;AACrC,QAAIrC,eAAJ,EAAqB;AACnBC,MAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD,KAFD,MAEO;AACLA,MAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACD;AACF,GAND;;AAQA,QAAMqC,wBAAwB,GAAG,MAAM;AACrCrC,IAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD,GAFD;;AAIA,sBACE;AAAK,IAAA,SAAS,EAAC,8CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,GAAG,EAAC,uIADN;AAEE,IAAA,GAAG,EAAC,WAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAOE;AAAM,IAAA,SAAS,EAAC,mBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UACIN,KAAK,CAACc,YAAN,CAAmB8B,QADvB,CAPF,EASU,GATV,eAUE;AAAM,IAAA,SAAS,EAAC,qBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG5C,KAAK,CAACc,YAAN,CAAmB+B,UADtB,CAVF,EAaGnB,YAAY,CAACC,OAAb,CAAqB,cAArB,iBACC,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAEQ,kBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIGD,YAJH,CADD,GAOG,IApBN,CADF,eAuBE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIlC,KAAK,CAACc,YAAN,CAAmBkB,OAAvB,CADF,CAvBF,EA2BG7B,eAAe,gBACd;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,QAAQ,EAAEiC,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,EAAE,EAAC,aAFL;AAGE,IAAA,KAAK,EAAEnC,WAHT;AAIE,IAAA,QAAQ,EAAGoC,CAAD,IAAOnC,eAAe,CAACmC,CAAC,CAACS,MAAF,CAASC,KAAV,CAJlC;AAKE,IAAA,YAAY,EAAC,KALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,CADc,GAcZ,IAzCN,EA2CG/C,KAAK,CAACc,YAAN,CAAmBkC,KAAnB,GAA2B,CAA3B,IAAgC3C,eAAe,KAAK,KAApD,gBACC;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,OAAO,EAAEqC,wBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cACQ1C,KAAK,CAACc,YAAN,CAAmBkC,KAD3B,gBADF,CADD,GAMG,IAjDN,EAmDG3C,eAAe,gBACd,oBAAC,aAAD;AACE,IAAA,UAAU,EAAEL,KAAK,CAACc,YAAN,CAAmBgB,UADjC;AAEE,IAAA,cAAc,EAAE9B,KAAK,CAAC+B,cAFxB;AAGE,IAAA,kBAAkB,EAAEzB,kBAHtB;AAIE,IAAA,QAAQ,EAAEC,QAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADc,GAOZ,IA1DN,EA4DGF,eAAe,gBACd;AAAQ,IAAA,OAAO,EAAEsC,wBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADc,GAEZ,IA9DN,CADF,CADF;AAoED","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./Comment.css\";\nimport ReplyIcon from \"@material-ui/icons/Reply\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport axios from \"axios\";\nimport ReplyComments from \"./replyComments/ReplyComments\";\n\nexport default function Comment(props) {\n  const [reply_input, set_reply_input] = useState(\"\");\n  const [show_reply_form, set_show_reply_form] = useState(false);\n  const [showViewReplies, setShowViewReplies] = useState(false);\n  const [newReply, setNewReply] = useState(\"\");\n\n  const getProfilePhoto = () => {\n    axios({\n      method: \"GET\",\n      url: \"http://localhost:5000/get_profile_photo\",\n      params: {\n        user_id: props.comment_info.commenter,\n      },\n    }).then((response) => {\n      console.log(response);\n      if (response.data.result) {\n        setProfileImg(response.data.result);\n      } else {\n        setProfileImg(null);\n      }\n    });\n  };\n\n  useEffect(() => {\n    getProfilePhoto();\n  }, []);\n\n  let commenterID = String(props.comment_info.commenter);\n  let userID = localStorage.getItem(\"userID\");\n\n  const deleteComment = (commentID) => {\n    axios({\n      method: \"POST\",\n      url: \"http://localhost:5000/post_delete_comment\",\n      params: { comment_id: commentID },\n    }).then((response) => {\n      if (response.data.result) {\n        console.log(`delete request ${response}`);\n        props.updateComments(props.comment_info.comment);\n        console.log(response);\n      }\n    });\n  };\n\n  const handleDeleteClicked = () => {\n    deleteComment(props.comment_info.comment_id);\n  };\n\n  let deleteButton =\n    commenterID === userID ? (\n      <IconButton onClick={handleDeleteClicked}>\n        <DeleteOutlineIcon />\n      </IconButton>\n    ) : (\n      <Button></Button>\n    );\n\n  const handleReplyClicked = () => {\n    // open the form\n    if (show_reply_form) {\n      set_show_reply_form(false);\n    } else {\n      set_show_reply_form(true);\n    }\n  };\n\n  const handleReplySubmitted = (e) => {\n    e.preventDefault();\n    post_reply_comments(reply_input);\n  };\n\n  const post_reply_comments = (reply_input) => {\n    axios({\n      method: \"POST\",\n      url: \"http://localhost:5000/post_comment_to_comment\",\n      params: {\n        comment_id: props.comment_info.comment_id,\n        comment: reply_input,\n        image_id: props.comment_info.image_id,\n      },\n    }).then((response) => {\n      if (response.data.result) {\n        props.updateComments(reply_input);\n        set_reply_input(\"\");\n        if (showViewReplies === true) {\n          setNewReply(reply_input);\n        }\n        console.log(\"reply submitted\");\n      }\n    });\n    axios({\n      method: \"GET\",\n      url: \"http://localhost:5000/update_comment_recommendation\",\n      params: { image_id: props.comment_info.image_id }, //user_id: 1\n    }).then((res) => {\n      console.log(res);\n    });\n  };\n\n  const handleViewRepliesClicked = () => {\n    if (showViewReplies) {\n      setShowViewReplies(false);\n    } else {\n      setShowViewReplies(true);\n    }\n  };\n\n  const handleHideRepliesClicked = () => {\n    setShowViewReplies(false);\n  };\n\n  return (\n    <div className=\"card v-card v-sheet theme--light elevation-2\">\n      <div className=\"header\">\n        <div className=\"comment-container\">\n          <div className=\"v-avatar avatar\">\n            <img\n              src=\"https://images.unsplash.com/photo-1490894641324-cfac2f5cd077?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=100&q=70\"\n              alt=\"user icon\"\n            ></img>\n          </div>\n          <span className=\"displayName title\">\n            @{props.comment_info.username}\n          </span>{\" \"}\n          <span className=\"displayName caption\">\n            {props.comment_info.created_at}\n          </span>\n          {localStorage.getItem(\"userLoggedIn\") ? (\n            <React.Fragment>\n              <IconButton onClick={handleReplyClicked}>\n                <ReplyIcon />\n              </IconButton>\n              {deleteButton}\n            </React.Fragment>\n          ) : null}\n        </div>\n        <div className=\"comment\">\n          <p>{props.comment_info.comment}</p>\n        </div>\n\n        {show_reply_form ? (\n          <div className=\"reply_form\">\n            <form onSubmit={handleReplySubmitted}>\n              <div>\n                <input\n                  type=\"reply\"\n                  id=\"reply_input\"\n                  value={reply_input}\n                  onChange={(e) => set_reply_input(e.target.value)}\n                  autoComplete=\"off\"\n                />\n              </div>\n            </form>\n          </div>\n        ) : null}\n\n        {props.comment_info.count > 0 && showViewReplies === false ? (\n          <div className=\"reply_form\">\n            <button onClick={handleViewRepliesClicked}>\n              View {props.comment_info.count} replies...\n            </button>\n          </div>\n        ) : null}\n\n        {showViewReplies ? (\n          <ReplyComments\n            comment_id={props.comment_info.comment_id}\n            updateComments={props.updateComments}\n            setShowViewReplies={setShowViewReplies}\n            newReply={newReply}\n          />\n        ) : null}\n\n        {showViewReplies ? (\n          <button onClick={handleHideRepliesClicked}>Hide replies</button>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}