{"ast":null,"code":"var _jsxFileName = \"/home/cristian/Documents/projects/COMP3900_PhotoPro/capstone-project-comp3900-f11a-2mjec/photopro-app/src/pages/UploadPhotoPage/CapturePhotoPage.jsx\";\nimport ReactDom from 'react-dom';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport './EditPostModal.css';\nimport TitleField from './textfields/TitleField';\nimport CaptionField from './textfields/CaptionField';\nimport TagsField from './textfields/TagsField';\nimport PriceField from './textfields/PriceField';\nimport ImageUploader from 'react-images-upload';\nexport default function CapturePhotoPage(props) {\n  const [img, setImg] = useState();\n  const [pictures, setPictures] = useState([]);\n  const [uploadButtonClicked, setUploadButtonClicked] = useState(false);\n  const [titleValidated, setTitleValidated] = useState(false);\n  const [captionValidated, setCaptionValidated] = useState(false);\n  const [priceValidated, setPriceValidated] = useState(false);\n  const [tagsValidated, setTagsValidated] = useState(false);\n  const [confirmationModalOpen, setConfirmationModalOpen] = useState(false);\n  const history = useHistory();\n\n  const onDrop = (pictureFiles, pictureDataURLs) => {\n    setPictures(pictures.concat(pictureFiles));\n    setImg(pictureDataURLs[0]);\n  };\n\n  useEffect(() => {\n    const attemptPost = () => {\n      const form_data = new FormData();\n      form_data.append('image', img);\n      form_data.append('caption', caption);\n      form_data.append('title', title);\n      form_data.append('price', price);\n      form_data.append('tags', tags);\n      const response = axios.post('http://localhost:5000/post', form_data);\n      console.log(response);\n      return response;\n    };\n\n    event.preventDefault();\n    const post = attemptPost();\n    post.then(response => {\n      console.log(response);\n\n      if (response.data.result !== false) {\n        setConfirmationModalOpen(true);\n      }\n    });\n  }, [titleValidated, captionValidated, priceValidated, tagsValidated]);\n\n  const formSubmit = event => {\n    setUploadButtonClicked(!uploadButtonClicked);\n  }; // function validate_title() {\n  //   return title.length > 0 && title.length < 50;\n  // }\n  // function validate_caption() {\n  //   return caption.length > 0 && caption.length < 50;\n  // }\n  // function validate_price() {\n  //   return parseInt(price) > 0 && price.length > 0;\n  // }\n  // function validate_tags() {\n  //   return tags.length > 0 && tags.length < 100;\n  // }\n\n\n  const handleCancelButton = () => {};\n\n  if (!props.openModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal( /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"grid-container-editpost\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"grid-item-image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ImageUploader, {\n      withIcon: true,\n      buttonText: \"Choose image\",\n      onChange: onDrop,\n      imgExtension: ['.jpg', '.png'],\n      maxFileSize: 5242880,\n      withPreview: true,\n      singleImage: true,\n      withLabel: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"edit-post-details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TitleField, {\n      uploadButtonClicked: uploadButtonClicked,\n      setTitleValidated: setTitleValidated,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CaptionField, {\n      uploadButtonClicked: uploadButtonClicked,\n      setCaptionValidated: setCaptionValidated,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(TagsField, {\n      uploadButtonClicked: uploadButtonClicked,\n      setTagsValidated: setTagsValidated,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(PriceField, {\n      uploadButtonClicked: uploadButtonClicked,\n      setPriceValidated: setPriceValidated,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      size: \"large\",\n      onClick: formSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, \"SAVE\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      size: \"large\",\n      onClick: handleCancelButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, \"Cancel\")))), document.getElementById('editPostPortal'));\n  }\n}","map":{"version":3,"sources":["/home/cristian/Documents/projects/COMP3900_PhotoPro/capstone-project-comp3900-f11a-2mjec/photopro-app/src/pages/UploadPhotoPage/CapturePhotoPage.jsx"],"names":["ReactDom","Button","axios","useHistory","TitleField","CaptionField","TagsField","PriceField","ImageUploader","CapturePhotoPage","props","img","setImg","useState","pictures","setPictures","uploadButtonClicked","setUploadButtonClicked","titleValidated","setTitleValidated","captionValidated","setCaptionValidated","priceValidated","setPriceValidated","tagsValidated","setTagsValidated","confirmationModalOpen","setConfirmationModalOpen","history","onDrop","pictureFiles","pictureDataURLs","concat","useEffect","attemptPost","form_data","FormData","append","caption","title","price","tags","response","post","console","log","event","preventDefault","then","data","result","formSubmit","handleCancelButton","openModal","createPortal","document","getElementById"],"mappings":"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","sourcesContent":["import ReactDom from 'react-dom';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport './EditPostModal.css';\n\nimport TitleField from './textfields/TitleField';\nimport CaptionField from './textfields/CaptionField';\nimport TagsField from './textfields/TagsField';\nimport PriceField from './textfields/PriceField';\nimport ImageUploader from 'react-images-upload';\n\nexport default function CapturePhotoPage(props) {\n  const [img, setImg] = useState();\n  const [pictures, setPictures] = useState([]);\n  const [uploadButtonClicked, setUploadButtonClicked] = useState(false);\n  const [titleValidated, setTitleValidated] = useState(false);\n  const [captionValidated, setCaptionValidated] = useState(false);\n  const [priceValidated, setPriceValidated] = useState(false);\n  const [tagsValidated, setTagsValidated] = useState(false);\n  const [confirmationModalOpen, setConfirmationModalOpen] = useState(false);\n\n  const history = useHistory();\n\n  const onDrop = (pictureFiles, pictureDataURLs) => {\n    setPictures(pictures.concat(pictureFiles));\n    setImg(pictureDataURLs[0]);\n  };\n\n  useEffect(() => {\n    const attemptPost = () => {\n      const form_data = new FormData();\n      form_data.append('image', img);\n      form_data.append('caption', caption);\n      form_data.append('title', title);\n      form_data.append('price', price);\n      form_data.append('tags', tags);\n\n      const response = axios.post('http://localhost:5000/post', form_data);\n      console.log(response);\n      return response;\n    };\n\n    event.preventDefault();\n    const post = attemptPost();\n    post.then((response) => {\n      console.log(response);\n      if (response.data.result !== false) {\n        setConfirmationModalOpen(true);\n      }\n    });\n  }, [titleValidated, captionValidated, priceValidated, tagsValidated]);\n\n  const formSubmit = (event) => {\n    setUploadButtonClicked(!uploadButtonClicked);\n  };\n\n  // function validate_title() {\n  //   return title.length > 0 && title.length < 50;\n  // }\n  // function validate_caption() {\n  //   return caption.length > 0 && caption.length < 50;\n  // }\n  // function validate_price() {\n  //   return parseInt(price) > 0 && price.length > 0;\n  // }\n  // function validate_tags() {\n  //   return tags.length > 0 && tags.length < 100;\n  // }\n\n  const handleCancelButton = () => {};\n\n  if (!props.openModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"grid-container-editpost\">\n          <div className=\"grid-item-image\">\n            <ImageUploader\n              withIcon={true}\n              buttonText=\"Choose image\"\n              onChange={onDrop}\n              imgExtension={['.jpg', '.png']}\n              maxFileSize={5242880}\n              withPreview={true}\n              singleImage={true}\n              withLabel={true}\n            />\n          </div>\n          <div className=\"edit-post-details\">\n            <TitleField\n              uploadButtonClicked={uploadButtonClicked}\n              setTitleValidated={setTitleValidated}\n            />\n            <CaptionField\n              uploadButtonClicked={uploadButtonClicked}\n              setCaptionValidated={setCaptionValidated}\n            />\n            <TagsField\n              uploadButtonClicked={uploadButtonClicked}\n              setTagsValidated={setTagsValidated}\n            />\n            <PriceField\n              uploadButtonClicked={uploadButtonClicked}\n              setPriceValidated={setPriceValidated}\n            />\n\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              size=\"large\"\n              onClick={formSubmit}\n            >\n              SAVE\n            </Button>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              size=\"large\"\n              onClick={handleCancelButton}\n            >\n              Cancel\n            </Button>\n          </div>\n        </div>\n      </React.Fragment>,\n      document.getElementById('editPostPortal')\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}