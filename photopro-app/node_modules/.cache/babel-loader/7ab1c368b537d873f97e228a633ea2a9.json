{"ast":null,"code":"var _jsxFileName = \"/home/mimi/Desktop/COMP3900/capstone-project-comp3900-f11a-2mjec/photopro-app/src/components/userPhotos/UserPhotos.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport './UserPhotos.css';\nimport axios from 'axios';\nimport ImageCard from '../feed/ImageCard/ImageCard';\nimport BookmarkModal from '../Modals/BookmarkModal/BookmarkModal';\n\nconst UserPhotos = props => {\n  const [username, setUsername] = useState(props.userID);\n  const [profileImgs, setProfileImgs] = useState([]);\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n  const [photoIdBookmarked, setPhotoIdBookmarked] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [hasPhotos, setHasPhotos] = useState(true);\n  const {\n    userID\n  } = props;\n  const displayMyProfile = localStorage.getItem('userID') == userID ? true : false;\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    axios({\n      url: 'http://localhost:5000/get_user_username',\n      params: {\n        user_id: userID\n      }\n    }).then(response => {\n      if (response.data.result) {\n        setUsername(response.data.result);\n      }\n    });\n  }, []);\n  useEffect(() => {\n    setTimeout(() => {\n      // temp fix to api call the clashes with another and which both modify file = \"image.jpg\"\n      fetchProfilePhotos();\n    }, 700);\n    return () => {\n      setProfileImgs([]);\n    };\n  }, [userID]);\n\n  const fetchProfilePhotos = () => {\n    setLoading(true);\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/profile_photos',\n      params: {\n        user_id: userID,\n        batch_size: 30\n      } //user_id: 1\n\n    }).then(res => {\n      console.log(res);\n\n      if (res.data.result !== false) {\n        setLoading(false);\n        setProfileImgs(res.data.result);\n      } else {\n        setLoading(false);\n        setHasPhotos(false);\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, displayMyProfile ? /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      marginTop: '10%',\n      marginLeft: '9%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"Uploaded Images: \", profileImgs.length) : /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      marginTop: '10%',\n      marginLeft: '9%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, \"Uploads: \", profileImgs.length), hasPhotos ? null : /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, \"You haven't uploaded any photos!\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, profileImgs.map((image, index) => {\n    if (image === null) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(ImageCard, {\n      key: image.id,\n      image: image,\n      openBookmarkModal: modalIsOpen,\n      setOpenBookmarkModal: setModalIsOpen,\n      setPhotoId: setPhotoIdBookmarked,\n      userLoggedIn: props.userLoggedIn,\n      displayMyProfile: displayMyProfile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    });\n  })), /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, loading && 'Loading...'), modalIsOpen ? /*#__PURE__*/React.createElement(BookmarkModal, {\n    openModal: modalIsOpen,\n    setOpenModal: setModalIsOpen,\n    photoId: photoIdBookmarked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }) : null);\n};\n\nexport default UserPhotos;","map":{"version":3,"sources":["/home/mimi/Desktop/COMP3900/capstone-project-comp3900-f11a-2mjec/photopro-app/src/components/userPhotos/UserPhotos.jsx"],"names":["React","useState","useEffect","axios","ImageCard","BookmarkModal","UserPhotos","props","username","setUsername","userID","profileImgs","setProfileImgs","modalIsOpen","setModalIsOpen","photoIdBookmarked","setPhotoIdBookmarked","loading","setLoading","hasPhotos","setHasPhotos","displayMyProfile","localStorage","getItem","window","scrollTo","url","params","user_id","then","response","data","result","setTimeout","fetchProfilePhotos","method","batch_size","res","console","log","marginTop","marginLeft","length","textAlign","map","image","index","id","userLoggedIn"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './UserPhotos.css';\nimport axios from 'axios';\nimport ImageCard from '../feed/ImageCard/ImageCard';\nimport BookmarkModal from '../Modals/BookmarkModal/BookmarkModal';\n\nconst UserPhotos = (props) => {\n  const [username, setUsername] = useState(props.userID);\n  const [profileImgs, setProfileImgs] = useState([]);\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n  const [photoIdBookmarked, setPhotoIdBookmarked] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [hasPhotos, setHasPhotos] = useState(true);\n\n  const { userID } = props;\n  const displayMyProfile =\n    localStorage.getItem('userID') == userID ? true : false;\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n\n    axios({\n      url: 'http://localhost:5000/get_user_username',\n      params: { user_id: userID },\n    }).then((response) => {\n      if (response.data.result) {\n        setUsername(response.data.result);\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    setTimeout(() => {\n      // temp fix to api call the clashes with another and which both modify file = \"image.jpg\"\n      fetchProfilePhotos();\n    }, 700);\n\n    return () => {\n      setProfileImgs([]);\n    };\n  }, [userID]);\n\n  const fetchProfilePhotos = () => {\n    setLoading(true);\n\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/profile_photos',\n      params: { user_id: userID, batch_size: 30 }, //user_id: 1\n    }).then((res) => {\n      console.log(res);\n      if (res.data.result !== false) {\n        setLoading(false);\n        setProfileImgs(res.data.result);\n      } else {\n        setLoading(false);\n        setHasPhotos(false);\n      }\n    });\n  };\n\n  return (\n    <React.Fragment>\n      {displayMyProfile ? (\n        <h2 style={{ marginTop: '10%', marginLeft: '9%' }}>\n          Uploaded Images: {profileImgs.length}\n        </h2>\n      ) : (\n        <h2 style={{ marginTop: '10%', marginLeft: '9%' }}>\n          Uploads: {profileImgs.length}\n        </h2>\n      )}\n      {hasPhotos ? null : (\n        <h2 style={{ textAlign: 'center' }}>\n          You haven't uploaded any photos!\n        </h2>\n      )}\n\n      <div className=\"image-grid\">\n        {profileImgs.map((image, index) => {\n          if (image === null) {\n            return null;\n          }\n\n          return (\n            <ImageCard\n              key={image.id}\n              image={image}\n              openBookmarkModal={modalIsOpen}\n              setOpenBookmarkModal={setModalIsOpen}\n              setPhotoId={setPhotoIdBookmarked}\n              userLoggedIn={props.userLoggedIn}\n              displayMyProfile={displayMyProfile}\n            />\n          );\n        })}\n      </div>\n      <h2 style={{ textAlign: 'center' }}>{loading && 'Loading...'}</h2>\n\n      {modalIsOpen ? (\n        <BookmarkModal\n          openModal={modalIsOpen}\n          setOpenModal={setModalIsOpen}\n          photoId={photoIdBookmarked}\n        ></BookmarkModal>\n      ) : null}\n    </React.Fragment>\n  );\n};\n\nexport default UserPhotos;\n"]},"metadata":{},"sourceType":"module"}