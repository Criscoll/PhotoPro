{"ast":null,"code":"var _jsxFileName = \"/home/mimi/Desktop/COMP3900/capstone-project-comp3900-f11a-2mjec/photopro-app/src/pages/CapturePhotoPage.jsx\";\nimport React from 'react';\nimport ImageUploader from 'react-images-upload';\nimport { Button, FormGroup, FormControl, FormLabel } from 'react-bootstrap';\nimport axios from 'axios';\nvar caption = '';\nvar title = '';\nvar tags = '';\nvar price = '0';\nvar img = null;\n\nfunction isValid() {\n  if (img == null) {\n    return true;\n  }\n\n  return false;\n}\n\nasync function attempt_login() {\n  const form_data = new FormData();\n  form_data.append('image', img);\n  form_data.append('caption', caption);\n  form_data.append('title', title);\n  form_data.append('price', price);\n  form_data.append('tags', tags);\n  const response = await axios.post('http://localhost:5000/post', form_data);\n  return response;\n}\n\nclass CapturePhotoPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pictures: [],\n      caption: ''\n    };\n    this.onDrop = this.onDrop.bind(this);\n    this.formSubmit = this.formSubmit.bind(this);\n  }\n\n  onDrop(pictureFiles, pictureDataURLs) {\n    this.setState({\n      pictures: this.state.pictures.concat(pictureFiles)\n    }); // console.log(pictureFiles[0]);\n    // console.log(pictureDataURLs[0]);\n\n    img = pictureDataURLs[0];\n  }\n\n  formSubmit(event) {\n    event.preventDefault();\n    const post = attempt_login();\n    post.then(response => {\n      console.log(response);\n\n      if (response.data.result !== false) {\n        this.props.history.push('/');\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ImageUploader, {\n      withIcon: true,\n      buttonText: \"Choose image\",\n      onChange: this.onDrop,\n      imgExtension: ['.jpg', '.png'],\n      maxFileSize: 5242880,\n      withPreview: true,\n      singleImage: true,\n      withLabel: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.formSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, \"Title:\"), /*#__PURE__*/React.createElement(FormControl, {\n      autoFocus: true,\n      onChange: e => title = e.target.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, \"Caption:\"), /*#__PURE__*/React.createElement(FormControl, {\n      autoFocus: true,\n      onChange: e => caption = e.target.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, \"Price: $\"), /*#__PURE__*/React.createElement(FormControl, {\n      autoFocus: true,\n      type: \"number\",\n      step: \"0.01\",\n      onChange: e => price = e.target.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, \"Tags: \"), /*#__PURE__*/React.createElement(FormControl, {\n      autoFocus: true,\n      onChange: e => tags = e.target.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      bsSize: \"large\",\n      disabled: isValid(),\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, \"Post\")), /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      bsSize: \"large\",\n      type: \"submit\",\n      onClick: () => {\n        this.props.history.goBack();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, \"Cancel\"));\n  }\n\n}\n\nexport default CapturePhotoPage;","map":{"version":3,"sources":["/home/mimi/Desktop/COMP3900/capstone-project-comp3900-f11a-2mjec/photopro-app/src/pages/CapturePhotoPage.jsx"],"names":["React","ImageUploader","Button","FormGroup","FormControl","FormLabel","axios","caption","title","tags","price","img","isValid","attempt_login","form_data","FormData","append","response","post","CapturePhotoPage","Component","constructor","props","state","pictures","onDrop","bind","formSubmit","pictureFiles","pictureDataURLs","setState","concat","event","preventDefault","then","console","log","data","result","history","push","render","e","target","value","goBack"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ImageUploader from 'react-images-upload';\nimport { Button, FormGroup, FormControl, FormLabel } from 'react-bootstrap';\nimport axios from 'axios';\n\nvar caption = '';\nvar title = '';\nvar tags = '';\nvar price = '0';\nvar img = null;\n\nfunction isValid() {\n  if (img == null) {\n    return true;\n  }\n  return false;\n}\n\nasync function attempt_login() {\n  const form_data = new FormData();\n  form_data.append('image', img);\n  form_data.append('caption', caption);\n  form_data.append('title', title);\n  form_data.append('price', price);\n  form_data.append('tags', tags);\n\n  const response = await axios.post('http://localhost:5000/post', form_data);\n  return response;\n}\n\nclass CapturePhotoPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { pictures: [], caption: '' };\n    this.onDrop = this.onDrop.bind(this);\n    this.formSubmit = this.formSubmit.bind(this);\n  }\n\n  onDrop(pictureFiles, pictureDataURLs) {\n    this.setState({\n      pictures: this.state.pictures.concat(pictureFiles),\n    });\n    // console.log(pictureFiles[0]);\n    // console.log(pictureDataURLs[0]);\n    img = pictureDataURLs[0];\n  }\n\n  formSubmit(event) {\n    event.preventDefault();\n    const post = attempt_login();\n    post.then((response) => {\n      console.log(response);\n      if (response.data.result !== false) {\n        this.props.history.push('/');\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <ImageUploader\n          withIcon={true}\n          buttonText=\"Choose image\"\n          onChange={this.onDrop}\n          imgExtension={['.jpg', '.png']}\n          maxFileSize={5242880}\n          withPreview={true}\n          singleImage={true}\n          withLabel={true}\n        />\n        <form onSubmit={this.formSubmit}>\n          <FormGroup bsSize=\"large\">\n            <FormLabel>Title:</FormLabel>\n            <FormControl autoFocus onChange={(e) => (title = e.target.value)} />\n          </FormGroup>\n          <FormGroup bsSize=\"large\">\n            <FormLabel>Caption:</FormLabel>\n            <FormControl\n              autoFocus\n              onChange={(e) => (caption = e.target.value)}\n            />\n          </FormGroup>\n          <FormGroup bsSize=\"large\">\n            <FormLabel>Price: $</FormLabel>\n            <FormControl\n              autoFocus\n              type=\"number\"\n              step=\"0.01\"\n              onChange={(e) => (price = e.target.value)}\n            />\n          </FormGroup>\n          <FormGroup bsSize=\"large\">\n            <FormLabel>Tags: </FormLabel>\n            <FormControl\n              autoFocus\n              onChange={(e) => (tags = e.target.value)}\n            />\n          </FormGroup>\n          <Button block bsSize=\"large\" disabled={isValid()} type=\"submit\">\n            Post\n          </Button>\n        </form>\n        <Button\n          block\n          bsSize=\"large\"\n          type=\"submit\"\n          onClick={() => {\n            this.props.history.goBack();\n          }}\n        >\n          Cancel\n        </Button>\n      </div>\n    );\n  }\n}\n\nexport default CapturePhotoPage;\n"]},"metadata":{},"sourceType":"module"}