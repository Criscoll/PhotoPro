{"ast":null,"code":"var _jsxFileName = \"/home/cristian/Documents/projects/COMP3900_PhotoPro/capstone-project-comp3900-f11a-2mjec/photopro-app/src/pages/UploadPhotoPage/CapturePhotoPage.jsx\";\nimport React from 'react';\nimport ImageUploader from 'react-images-upload';\nimport { Button, FormGroup, FormControl, FormLabel } from 'react-bootstrap';\nimport axios from 'axios';\nimport PostConfirmationModal from './PostConfirmationModal/PostConfirmationModal';\nvar caption = '';\nvar title = '';\nvar tags = '';\nvar price = '0';\nvar img = null;\n\nfunction isValid() {\n  if (img == null) {\n    return true;\n  }\n\n  return false;\n}\n\nasync function attempt_login() {\n  const form_data = new FormData();\n  form_data.append('image', img);\n  form_data.append('caption', caption);\n  form_data.append('title', title);\n  form_data.append('price', price);\n  form_data.append('tags', tags);\n  const response = await axios.post('http://localhost:5000/post', form_data);\n  console.log(response);\n  return response;\n}\n\nclass CapturePhotoPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      postConfirmationModalOpen: false,\n      pictures: [],\n      caption: ''\n    };\n    this.onDrop = this.onDrop.bind(this);\n    this.formSubmit = this.formSubmit.bind(this);\n  }\n\n  onDrop(pictureFiles, pictureDataURLs) {\n    this.setState({\n      pictures: this.state.pictures.concat(pictureFiles)\n    }); // console.log(pictureFiles[0]);\n    // console.log(pictureDataURLs[0]);\n\n    img = pictureDataURLs[0];\n  }\n\n  formSubmit(event) {\n    event.preventDefault();\n    const post = attempt_login();\n    post.then(response => {\n      console.log(response);\n\n      if (response.data.result !== false) {\n        this.setState({\n          postConfirmationModalOpen: true\n        });\n        this.props.history.push('/');\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ImageUploader, {\n      withIcon: true,\n      buttonText: \"Choose image\",\n      onChange: this.onDrop,\n      imgExtension: ['.jpg', '.png'],\n      maxFileSize: 5242880,\n      withPreview: true,\n      singleImage: true,\n      withLabel: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.formSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, \"Title:\"), /*#__PURE__*/React.createElement(FormControl, {\n      autoFocus: true,\n      onChange: e => title = e.target.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, \"Caption:\"), /*#__PURE__*/React.createElement(FormControl, {\n      autoFocus: true,\n      onChange: e => caption = e.target.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, \"Price: $\"), /*#__PURE__*/React.createElement(FormControl, {\n      autoFocus: true,\n      type: \"number\",\n      step: \"0.01\",\n      onChange: e => price = e.target.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, \"Tags: \"), /*#__PURE__*/React.createElement(FormControl, {\n      autoFocus: true,\n      onChange: e => tags = e.target.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      bsSize: \"large\",\n      disabled: isValid(),\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, \"Post\")), /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      bsSize: \"large\",\n      type: \"submit\",\n      onClick: () => {\n        this.props.history.goBack();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, \"Cancel\"), postConfirmationModalOpen ? /*#__PURE__*/React.createElement(PostConfirmationModal, {\n      isOpen: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }\n    }) : null);\n  }\n\n}\n\nexport default CapturePhotoPage;","map":{"version":3,"sources":["/home/cristian/Documents/projects/COMP3900_PhotoPro/capstone-project-comp3900-f11a-2mjec/photopro-app/src/pages/UploadPhotoPage/CapturePhotoPage.jsx"],"names":["React","ImageUploader","Button","FormGroup","FormControl","FormLabel","axios","PostConfirmationModal","caption","title","tags","price","img","isValid","attempt_login","form_data","FormData","append","response","post","console","log","CapturePhotoPage","Component","constructor","props","state","postConfirmationModalOpen","pictures","onDrop","bind","formSubmit","pictureFiles","pictureDataURLs","setState","concat","event","preventDefault","then","data","result","history","push","render","e","target","value","goBack"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,qBAA1B;AACA,SAASC,MAAT,EAAiBC,SAAjB,EAA4BC,WAA5B,EAAyCC,SAAzC,QAA0D,iBAA1D;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,qBAAP,MAAkC,+CAAlC;AAEA,IAAIC,OAAO,GAAG,EAAd;AACA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,IAAI,GAAG,EAAX;AACA,IAAIC,KAAK,GAAG,GAAZ;AACA,IAAIC,GAAG,GAAG,IAAV;;AAEA,SAASC,OAAT,GAAmB;AACjB,MAAID,GAAG,IAAI,IAAX,EAAiB;AACf,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD;;AAED,eAAeE,aAAf,GAA+B;AAC7B,QAAMC,SAAS,GAAG,IAAIC,QAAJ,EAAlB;AACAD,EAAAA,SAAS,CAACE,MAAV,CAAiB,OAAjB,EAA0BL,GAA1B;AACAG,EAAAA,SAAS,CAACE,MAAV,CAAiB,SAAjB,EAA4BT,OAA5B;AACAO,EAAAA,SAAS,CAACE,MAAV,CAAiB,OAAjB,EAA0BR,KAA1B;AACAM,EAAAA,SAAS,CAACE,MAAV,CAAiB,OAAjB,EAA0BN,KAA1B;AACAI,EAAAA,SAAS,CAACE,MAAV,CAAiB,MAAjB,EAAyBP,IAAzB;AAEA,QAAMQ,QAAQ,GAAG,MAAMZ,KAAK,CAACa,IAAN,CAAW,4BAAX,EAAyCJ,SAAzC,CAAvB;AACAK,EAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACA,SAAOA,QAAP;AACD;;AAED,MAAMI,gBAAN,SAA+BtB,KAAK,CAACuB,SAArC,CAA+C;AAC7CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,yBAAyB,EAAE,KADhB;AAEXC,MAAAA,QAAQ,EAAE,EAFC;AAGXpB,MAAAA,OAAO,EAAE;AAHE,KAAb;AAKA,SAAKqB,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AACD;;AAEDD,EAAAA,MAAM,CAACG,YAAD,EAAeC,eAAf,EAAgC;AACpC,SAAKC,QAAL,CAAc;AACZN,MAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWE,QAAX,CAAoBO,MAApB,CAA2BH,YAA3B;AADE,KAAd,EADoC,CAIpC;AACA;;AACApB,IAAAA,GAAG,GAAGqB,eAAe,CAAC,CAAD,CAArB;AACD;;AAEDF,EAAAA,UAAU,CAACK,KAAD,EAAQ;AAChBA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAMlB,IAAI,GAAGL,aAAa,EAA1B;AACAK,IAAAA,IAAI,CAACmB,IAAL,CAAWpB,QAAD,IAAc;AACtBE,MAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;;AACA,UAAIA,QAAQ,CAACqB,IAAT,CAAcC,MAAd,KAAyB,KAA7B,EAAoC;AAClC,aAAKN,QAAL,CAAc;AAAEP,UAAAA,yBAAyB,EAAE;AAA7B,SAAd;AACA,aAAKF,KAAL,CAAWgB,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD;AACF,KAND;AAOD;;AAEDC,EAAAA,MAAM,GAAG;AACP,wBACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,aAAD;AACE,MAAA,QAAQ,EAAE,IADZ;AAEE,MAAA,UAAU,EAAC,cAFb;AAGE,MAAA,QAAQ,EAAE,KAAKd,MAHjB;AAIE,MAAA,YAAY,EAAE,CAAC,MAAD,EAAS,MAAT,CAJhB;AAKE,MAAA,WAAW,EAAE,OALf;AAME,MAAA,WAAW,EAAE,IANf;AAOE,MAAA,WAAW,EAAE,IAPf;AAQE,MAAA,SAAS,EAAE,IARb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAWE;AAAM,MAAA,QAAQ,EAAE,KAAKE,UAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,SAAD;AAAW,MAAA,MAAM,EAAC,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,oBAAC,WAAD;AAAa,MAAA,SAAS,MAAtB;AAAuB,MAAA,QAAQ,EAAGa,CAAD,IAAQnC,KAAK,GAAGmC,CAAC,CAACC,MAAF,CAASC,KAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,eAKE,oBAAC,SAAD;AAAW,MAAA,MAAM,EAAC,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,oBAAC,WAAD;AACE,MAAA,SAAS,MADX;AAEE,MAAA,QAAQ,EAAGF,CAAD,IAAQpC,OAAO,GAAGoC,CAAC,CAACC,MAAF,CAASC,KAFvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CALF,eAYE,oBAAC,SAAD;AAAW,MAAA,MAAM,EAAC,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,oBAAC,WAAD;AACE,MAAA,SAAS,MADX;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,IAAI,EAAC,MAHP;AAIE,MAAA,QAAQ,EAAGF,CAAD,IAAQjC,KAAK,GAAGiC,CAAC,CAACC,MAAF,CAASC,KAJrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAZF,eAqBE,oBAAC,SAAD;AAAW,MAAA,MAAM,EAAC,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,oBAAC,WAAD;AAAa,MAAA,SAAS,MAAtB;AAAuB,MAAA,QAAQ,EAAGF,CAAD,IAAQlC,IAAI,GAAGkC,CAAC,CAACC,MAAF,CAASC,KAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CArBF,eAyBE,oBAAC,MAAD;AAAQ,MAAA,KAAK,MAAb;AAAc,MAAA,MAAM,EAAC,OAArB;AAA6B,MAAA,QAAQ,EAAEjC,OAAO,EAA9C;AAAkD,MAAA,IAAI,EAAC,QAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAzBF,CAXF,eAwCE,oBAAC,MAAD;AACE,MAAA,KAAK,MADP;AAEE,MAAA,MAAM,EAAC,OAFT;AAGE,MAAA,IAAI,EAAC,QAHP;AAIE,MAAA,OAAO,EAAE,MAAM;AACb,aAAKY,KAAL,CAAWgB,OAAX,CAAmBM,MAAnB;AACD,OANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAxCF,EAkDGpB,yBAAyB,gBACxB,oBAAC,qBAAD;AAAuB,MAAA,MAAM,EAAE,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADwB,GAEtB,IApDN,CADF;AAwDD;;AA1F4C;;AA6F/C,eAAeL,gBAAf","sourcesContent":["import React from 'react';\nimport ImageUploader from 'react-images-upload';\nimport { Button, FormGroup, FormControl, FormLabel } from 'react-bootstrap';\nimport axios from 'axios';\nimport PostConfirmationModal from './PostConfirmationModal/PostConfirmationModal';\n\nvar caption = '';\nvar title = '';\nvar tags = '';\nvar price = '0';\nvar img = null;\n\nfunction isValid() {\n  if (img == null) {\n    return true;\n  }\n  return false;\n}\n\nasync function attempt_login() {\n  const form_data = new FormData();\n  form_data.append('image', img);\n  form_data.append('caption', caption);\n  form_data.append('title', title);\n  form_data.append('price', price);\n  form_data.append('tags', tags);\n\n  const response = await axios.post('http://localhost:5000/post', form_data);\n  console.log(response);\n  return response;\n}\n\nclass CapturePhotoPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      postConfirmationModalOpen: false,\n      pictures: [],\n      caption: '',\n    };\n    this.onDrop = this.onDrop.bind(this);\n    this.formSubmit = this.formSubmit.bind(this);\n  }\n\n  onDrop(pictureFiles, pictureDataURLs) {\n    this.setState({\n      pictures: this.state.pictures.concat(pictureFiles),\n    });\n    // console.log(pictureFiles[0]);\n    // console.log(pictureDataURLs[0]);\n    img = pictureDataURLs[0];\n  }\n\n  formSubmit(event) {\n    event.preventDefault();\n    const post = attempt_login();\n    post.then((response) => {\n      console.log(response);\n      if (response.data.result !== false) {\n        this.setState({ postConfirmationModalOpen: true });\n        this.props.history.push('/');\n      }\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <ImageUploader\n          withIcon={true}\n          buttonText=\"Choose image\"\n          onChange={this.onDrop}\n          imgExtension={['.jpg', '.png']}\n          maxFileSize={5242880}\n          withPreview={true}\n          singleImage={true}\n          withLabel={true}\n        />\n        <form onSubmit={this.formSubmit}>\n          <FormGroup bsSize=\"large\">\n            <FormLabel>Title:</FormLabel>\n            <FormControl autoFocus onChange={(e) => (title = e.target.value)} />\n          </FormGroup>\n          <FormGroup bsSize=\"large\">\n            <FormLabel>Caption:</FormLabel>\n            <FormControl\n              autoFocus\n              onChange={(e) => (caption = e.target.value)}\n            />\n          </FormGroup>\n          <FormGroup bsSize=\"large\">\n            <FormLabel>Price: $</FormLabel>\n            <FormControl\n              autoFocus\n              type=\"number\"\n              step=\"0.01\"\n              onChange={(e) => (price = e.target.value)}\n            />\n          </FormGroup>\n          <FormGroup bsSize=\"large\">\n            <FormLabel>Tags: </FormLabel>\n            <FormControl autoFocus onChange={(e) => (tags = e.target.value)} />\n          </FormGroup>\n          <Button block bsSize=\"large\" disabled={isValid()} type=\"submit\">\n            Post\n          </Button>\n        </form>\n        <Button\n          block\n          bsSize=\"large\"\n          type=\"submit\"\n          onClick={() => {\n            this.props.history.goBack();\n          }}\n        >\n          Cancel\n        </Button>\n        {postConfirmationModalOpen ? (\n          <PostConfirmationModal isOpen={true} />\n        ) : null}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default CapturePhotoPage;\n"]},"metadata":{},"sourceType":"module"}