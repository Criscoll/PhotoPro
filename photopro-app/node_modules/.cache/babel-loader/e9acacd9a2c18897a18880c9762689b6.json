{"ast":null,"code":"var _jsxFileName = \"/home/matthew/Projects/capstone-project-comp3900-f11a-2mjec/photopro-app/src/components/follow/followButton.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Button from '@material-ui/core/Button';\n\nconst FollowButton = props => {\n  const [following, setFollowing] = useState(false);\n  useEffect(() => {\n    let mounted = true;\n\n    const checkIfFollowing = () => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/is_following',\n        params: {\n          following: props.uploader\n        }\n      }).then(response => {\n        console.log(response);\n\n        if (response.data.result === true && mounted) {\n          setFollowing(true);\n        } else if (mounted) {\n          setFollowing(false);\n        }\n      });\n    };\n\n    checkIfFollowing();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  const handleFollowClicked = () => {\n    const follow = () => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/follow',\n        params: {\n          to_follow: props.uploader\n        }\n      }).then(response => {\n        console.log(response);\n\n        if (response.data.result === true) {\n          setFollowing(true);\n        } else {\n          setFollowing(false);\n        }\n      });\n    };\n\n    const unfollow = () => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/unfollow',\n        params: {\n          following: props.uploader\n        }\n      }).then(response => {\n        console.log(response);\n\n        if (response.data.result === true) {\n          setFollowing(false);\n        } else {\n          setFollowing(true);\n        }\n      });\n    };\n\n    if (following) {\n      unfollow();\n    } else {\n      follow();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, following ? /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    style: {},\n    onClick: handleFollowClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, \"Following\") : /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    style: {},\n    onClick: handleFollowClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, \"Follow\"));\n};\n\nexport default FollowButton;","map":{"version":3,"sources":["/home/matthew/Projects/capstone-project-comp3900-f11a-2mjec/photopro-app/src/components/follow/followButton.jsx"],"names":["React","useState","useEffect","axios","Button","FollowButton","props","following","setFollowing","mounted","checkIfFollowing","method","url","params","uploader","then","response","console","log","data","result","handleFollowClicked","follow","to_follow","unfollow"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Button from '@material-ui/core/Button';\n\nconst FollowButton = (props) => {\n  const [following, setFollowing] = useState(false);\n\n  useEffect(() => {\n    let mounted = true;\n\n    const checkIfFollowing = () => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/is_following',\n        params: { following: props.uploader },\n      }).then((response) => {\n        console.log(response);\n        if (response.data.result === true && mounted) {\n          setFollowing(true);\n        } else if (mounted) {\n          setFollowing(false);\n        }\n      });\n    };\n\n    checkIfFollowing();\n\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  const handleFollowClicked = () => {\n    const follow = () => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/follow',\n        params: { to_follow: props.uploader },\n      }).then((response) => {\n        console.log(response);\n        if (response.data.result === true) {\n          setFollowing(true);\n        } else {\n          setFollowing(false);\n        }\n      });\n    };\n\n    const unfollow = () => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/unfollow',\n        params: { following: props.uploader },\n      }).then((response) => {\n        console.log(response);\n        if (response.data.result === true) {\n          setFollowing(false);\n        } else {\n          setFollowing(true);\n        }\n      });\n    };\n\n    if (following) {\n      unfollow();\n    } else {\n      follow();\n    }\n  };\n\n  return (\n    <React.Fragment>\n      {following ? (\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          style={{}}\n          onClick={handleFollowClicked}\n        >\n          Following\n        </Button>\n      ) : (\n        <Button\n          variant=\"outlined\"\n          color=\"primary\"\n          style={{}}\n          onClick={handleFollowClicked}\n        >\n          Follow\n        </Button>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default FollowButton;\n"]},"metadata":{},"sourceType":"module"}