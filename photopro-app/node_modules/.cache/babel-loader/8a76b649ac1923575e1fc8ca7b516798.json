{"ast":null,"code":"var _jsxFileName = \"/home/matthew/Projects/capstone-project-comp3900-f11a-2mjec/photopro-app/src/components/toolbar/notifications/notifications.jsx\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nconst ITEM_HEIGHT = 60;\nexport default function Notifications() {\n  const [notifications, setNotifications] = useState([]);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n  console.log(notifications);\n\n  const handleClick = event => {\n    const fetchNotifications = () => {\n      axios({\n        url: 'http://localhost:5000/fetch_notification',\n        params: {}\n      }).then(res => {\n        console.log(res);\n\n        if (res.data.result) {\n          console.log('setting notifications');\n          setNotifications(res.data.result);\n        }\n      });\n    };\n\n    setAnchorEl(event.currentTarget);\n    fetchNotifications();\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleClearNotifications = () => {\n    console.log('clear notifications');\n\n    const clearNotifications = () => {\n      axios({\n        url: 'http://localhost:5000/clear_notifications',\n        params: {}\n      }).then(res => {\n        console.log(res);\n      });\n    };\n\n    clearNotifications();\n    setNotifications([]);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"more\",\n    \"aria-controls\": \"long-menu\",\n    \"aria-haspopup\": \"true\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(NotificationsIcon, {\n    style: {\n      color: 'rgba(224, 224, 224, 0.74)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Menu, {\n    id: \"long-menu\",\n    anchorEl: anchorEl,\n    keepMounted: true,\n    open: open,\n    onClose: handleClose,\n    PaperProps: {\n      style: {\n        maxHeight: ITEM_HEIGHT * 4.5,\n        width: '50ch'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, notifications.length > 0 ? notifications.map((notification, index) => {\n    let notifMessage = null;\n\n    if (notification.type === 'like') {\n      notifMessage = `@${notification.sender} liked your post - '${notification.image_id}'`;\n    } else if (notification.type === 'comment') {\n      notifMessage = `@${notification.sender} commented on your post - '${notification.image_id}'`;\n    } else if (notification.type === 'posted') {\n      notifMessage = `@${notification.sender} has uploaded a new post - '${notification.image_id}'`;\n    } else if (notification.type === 'purchased') {\n      notifMessage = `@${notification.sender} has purchased your photo - '${notification.image_id}'`;\n    } else {\n      notifMessage = `@${notification.sender} started following you`;\n    }\n\n    if (index === 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        key: index,\n        onClick: handleClearNotifications,\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 19\n        }\n      }, \"Clear Notifications\"), /*#__PURE__*/React.createElement(MenuItem, {\n        key: index + 1,\n        onClick: handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }\n      }, notifMessage)));\n    }\n\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      key: index + 1,\n      onClick: handleClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, notifMessage));\n  }) : /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, \"No Notifications at this time\")));\n}","map":{"version":3,"sources":["/home/matthew/Projects/capstone-project-comp3900-f11a-2mjec/photopro-app/src/components/toolbar/notifications/notifications.jsx"],"names":["React","useState","axios","IconButton","Menu","MenuItem","NotificationsIcon","ITEM_HEIGHT","Notifications","notifications","setNotifications","anchorEl","setAnchorEl","open","Boolean","console","log","handleClick","event","fetchNotifications","url","params","then","res","data","result","currentTarget","handleClose","handleClearNotifications","clearNotifications","color","style","maxHeight","width","length","map","notification","index","notifMessage","type","sender","image_id","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\n\nconst ITEM_HEIGHT = 60;\n\nexport default function Notifications() {\n  const [notifications, setNotifications] = useState([]);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  console.log(notifications);\n\n  const handleClick = (event) => {\n    const fetchNotifications = () => {\n      axios({\n        url: 'http://localhost:5000/fetch_notification',\n        params: {},\n      }).then((res) => {\n        console.log(res);\n        if (res.data.result) {\n          console.log('setting notifications');\n          setNotifications(res.data.result);\n        }\n      });\n    };\n\n    setAnchorEl(event.currentTarget);\n    fetchNotifications();\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleClearNotifications = () => {\n    console.log('clear notifications');\n    const clearNotifications = () => {\n      axios({\n        url: 'http://localhost:5000/clear_notifications',\n        params: {},\n      }).then((res) => {\n        console.log(res);\n      });\n    };\n\n    clearNotifications();\n    setNotifications([]);\n  };\n\n  return (\n    <div>\n      <IconButton\n        aria-label=\"more\"\n        aria-controls=\"long-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n      >\n        <NotificationsIcon style={{ color: 'rgba(224, 224, 224, 0.74)' }} />\n      </IconButton>\n      <Menu\n        id=\"long-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n        PaperProps={{\n          style: {\n            maxHeight: ITEM_HEIGHT * 4.5,\n            width: '50ch',\n          },\n        }}\n      >\n        {notifications.length > 0 ? (\n          notifications.map((notification, index) => {\n            let notifMessage = null;\n            if (notification.type === 'like') {\n              notifMessage = `@${notification.sender} liked your post - '${notification.image_id}'`;\n            } else if (notification.type === 'comment') {\n              notifMessage = `@${notification.sender} commented on your post - '${notification.image_id}'`;\n            } else if (notification.type === 'posted') {\n              notifMessage = `@${notification.sender} has uploaded a new post - '${notification.image_id}'`;\n            } else if (notification.type === 'purchased') {\n              notifMessage = `@${notification.sender} has purchased your photo - '${notification.image_id}'`;\n            } else {\n              notifMessage = `@${notification.sender} started following you`;\n            }\n            if (index === 0) {\n              return (\n                <div key={index}>\n                  <MenuItem\n                    key={index}\n                    onClick={handleClearNotifications}\n                    style={{ fontWeight: 'bold' }}\n                  >\n                    Clear Notifications\n                  </MenuItem>\n                  <MenuItem key={index + 1} onClick={handleClose}>\n                    <div>{notifMessage}</div>\n                  </MenuItem>\n                </div>\n              );\n            }\n            return (\n              <MenuItem key={index + 1} onClick={handleClose}>\n                <div>{notifMessage}</div>\n              </MenuItem>\n            );\n          })\n        ) : (\n          <MenuItem onClick={handleClose}>\n            No Notifications at this time\n          </MenuItem>\n        )}\n      </Menu>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}